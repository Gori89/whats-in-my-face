<html>

<head>
  <title>What's in my face?</title>
  <style>
    td,
    p,
    input {
      font: 14px Verdana;
    }

    table,
    td {
      border: solid 1px #DDD;
      border-collapse: collapse;
      padding: 2px 3px;
      text-align: center;
    }

  </style>
</head>

<body>
  <h1>What's in my face?</h1>

  <table>
    <tr>
      <td>
        <img src="{{ url_for('video_feed') }}">
        <!-- <img src="{{ url_for('video_feed2') }}"> -->
      </td>
      <td>
       <p id="showData"></p>
      </td>
    </tr>
  </table>

  <script>
    whatever = () => {
      fetch("/attributes")
        .then(response => response.json())
        .then(data => {
          //debugger
          console.log(data)
          attribute_name = Object.keys(data)
          console.log(attribute_name)
          console.log(attribute_name[2])
          //get header
          var table = document.createElement("table");

          // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

          for (var i = 0; i < attribute_name.length; i++) {
            var tr = table.insertRow(-1);
            var tabCell = tr.insertCell(-1);
            tabCell.innerHTML = attribute_name[i];
            var tabCell = tr.insertCell(-1);
            tabCell.innerHTML = data[attribute_name[i]];
          }


          // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
          var divContainer = document.getElementById("showData");
          divContainer.innerHTML = "";
          divContainer.appendChild(table);

          //new Text("results",data) 

          //insert dom element
        })
    }

    setInterval(whatever, 1000)

  </script>

</body>

</html>